<mat-card class="form-card" *ngIf="!(pollResult$ | async)">
  <mat-card-title>New Poll</mat-card-title>
  <mat-card-subtitle>Create a new poll</mat-card-subtitle>
  <mat-card-content>
    <form (ngSubmit)="onSubmit(pollForm)" id="ngForm" #pollForm="ngForm">
      <mat-form-field class="full-width">
        <input matInput placeholder="Poll title" name="pollTitle" ngModel required>
      </mat-form-field>

      <mat-form-field class="full-width" *ngFor="let option of options">
        <input matInput [id]="'option' + option.id" [placeholder]="option.placeholder"
                        [name]="'option' + option.id"
                        [(ngModel)]="option.description"
                        (focus)="onOptionInputFocused($event, option.id)">
      </mat-form-field>
    </form>
  </mat-card-content>
  <mat-card-actions>
    <button mat-raised-button color="primary" form="ngForm" [disabled]="submitting">
      <mat-spinner *ngIf="submitting"></mat-spinner>
      {{(submitting) ? 'Submitting' : 'Start Poll'}}
    </button>
  </mat-card-actions>
</mat-card>

<app-poll-share [poll]="poll" *ngIf="pollResult$ | async as poll"></app-poll-share>